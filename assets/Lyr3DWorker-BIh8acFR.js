const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/lyr3DWorker-CGW2YJoI.js","assets/_commonjsHelpers-DCkdB7M8.js"])))=>i.map(i=>d[i]);
import{aH as p,j1 as d}from"./index-Bkom2Sdc.js";function _(){return new Promise(t=>p(()=>import("./lyr3DWorker-CGW2YJoI.js"),__vite__mapDeps([0,1])).then(s=>s.l).then(({default:s})=>{const r=s({locateFile:h,onRuntimeInitialized:()=>t(r)})})).catch(t=>{throw t})}function h(t){return d(`esri/libs/lyr3d/${t}`)}let o,e;async function g(t){await f();const s={status:1,error:"",jobDescJson:"",data:new Uint8Array(0),missingInputUrls:[]};if(t.inputs.length<1)return{result:s,transferList:[]};const r={ptrs:[],sizes:[]};for(const n of t.inputs){const c=e._malloc(n.byteLength);new Uint8Array(e.HEAPU8.buffer,c,n.byteLength).set(new Uint8Array(n)),r.ptrs.push(c),r.sizes.push(n.byteLength)}const i=e.process(t.jobDescJson,t.id,r,t.isMissingResourceCase);s.status=i.status,s.missingInputUrls=i.missingInputUrls.slice();const u=i.status===0&&i.data,l=s.status===2&&s.missingInputUrls.length>0;s.jobDescJson=i.jobDescJson.slice(),s.error=i.error.slice(),u?s.data=i.data.slice():l&&(s.originalInputs=t.inputs.slice());for(let n=0;n<r.ptrs.length;++n)e._free(r.ptrs[n]);const a=[];if(u)a.push(s.data.buffer);else if(l)for(const n of t.inputs)a.push(n);return{result:s,transferList:a}}async function y(t){await f(),e.add_spatial_reference_info(t.sr,t.isGCS,t.toMetersXY,t.toMetersZ)}function w(){e&&(e.uninitialize_lyr3d_worker_wasm(),e=null)}function f(){return e?Promise.resolve():(o||(o=_().then(t=>{e=t,e.initialize_lyr3d_worker_wasm(),o=null})),o)}export{y as addSpatialReferenceInfo,w as destroyWasm,f as initialize,g as process};
