import{bv as d,bl as h,f$ as b,d9 as g,jA as w,bu as R,bb as s,bc as c,gS as u,dG as N,bd as S,bG as v,cI as J,aR as O}from"./index-C2z3vZ9k.js";var m;let o=m=class extends d{constructor(e){super(e),this.geometry=null,this.type="clip"}writeGeometry(e,r,a,t){var n;if((n=t.layer)!=null&&n.spatialReference&&!t.layer.spatialReference.equals(this.geometry.spatialReference)){if(!h(e.spatialReference,t.layer.spatialReference))return void((t==null?void 0:t.messages)&&t.messages.push(new b("scenemodification:unsupported","Scene modifications with incompatible spatial references are not supported",{modification:this,spatialReference:t.layer.spatialReference,context:t})));const l=new g;w(e,l,t.layer.spatialReference),r[a]=l.toJSON(t)}else r[a]=e.toJSON(t);delete r[a].spatialReference}clone(){return new m({geometry:R(this.geometry),type:this.type})}};s([c({type:g}),u()],o.prototype,"geometry",void 0),s([N(["web-scene","portal-item"],"geometry")],o.prototype,"writeGeometry",null),s([c({type:["clip","mask","replace"],nonNullable:!0}),u()],o.prototype,"type",void 0),o=m=s([S("esri.layers.support.SceneModification")],o);var i;let p=i=class extends d.JSONSupportMixin(v.ofType(o)){constructor(e){super(e),this.url=null}clone(){return new i({url:this.url,items:this.items.map((e=>e.clone()))})}toJSON(e){return this.toArray().map((r=>r.toJSON(e))).filter((r=>!!r.geometry))}static fromJSON(e,r){const a=new i;for(const t of e)a.add(o.fromJSON(t,r));return a}static async fromUrl(e,r,a){const t={url:J(e),origin:"service"},n=await O(e,{responseType:"json",signal:a==null?void 0:a.signal}),l=r.toJSON(),y=[];for(const f of n.data)y.push(o.fromJSON({...f,geometry:{...f.geometry,spatialReference:l}},t));return new i({url:e,items:y})}};s([c({type:String})],p.prototype,"url",void 0),p=i=s([S("esri.layers.support.SceneModifications")],p);export{p as n};
