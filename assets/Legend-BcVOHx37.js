const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Bkom2Sdc.js","assets/index-CkucmIUh.css"])))=>i.map(i=>d[i]);
import{t8 as ke,fj as s,fk as ye,t9 as st,ta as it,tb as lt,tc as rt,td as at,te as Me,tf as nt,na as ot,oo as ee,op as ct,m5 as A,tg as dt,b8 as n,ba as c,bb as S,b5 as D,gZ as le,th as pt,ti as ht,eQ as be,m9 as yt,aH as Be,md as ue,fl as Le,tj as mt,tk as ut,bf as vt,fA as $e,bE as we,f$ as Pe,hk as ft}from"./index-Bkom2Sdc.js";import{s as me,l as gt}from"./Heading-THbeZGao.js";const Ne="esri-relationship-ramp",te=`${Ne}--diamond`,O=`${Ne}--square`,bt="http://www.w3.org/2000/svg",$={diamondContainer:`${te}__container`,diamondLeftCol:`${te}__left-column`,diamondRightCol:`${te}__right-column`,diamondMidCol:`${te}__middle-column`,diamondMidColLabel:`${te}__middle-column--label`,diamondMidColRamp:`${te}__middle-column--ramp`,squareTable:`${O}__table`,squareTableRow:`${O}__table-row`,squareTableCell:`${O}__table-cell`,squareTableLabel:`${O}__table-label`,squareTableLabelLeftBottom:`${O}__table-label--left-bottom`,squareTableLabelRightBottom:`${O}__table-label--right-bottom`,squareTableLabelLeftTop:`${O}__table-label--left-top`,squareTableLabelRightTop:`${O}__table-label--right-top`};function De(e,t,i={}){const{focus:r,labels:l}=e,a=!!r,o=$t(e,t,i),y={justifyContent:"center"},p=ke(),m=i.key??t;return a?s("div",{class:$.diamondContainer,key:`${m}-container`,styles:y},s("div",{class:$.diamondLeftCol},p?l.right:l.left),s("div",{class:$.diamondMidCol},s("div",{class:$.diamondMidColLabel},l.top),o,s("div",{class:$.diamondMidColLabel},l.bottom)),s("div",{class:$.diamondRightCol},p?l.left:l.right)):s("div",{class:$.squareTable,key:`${m}-container`},s("div",{class:$.squareTableRow},s("div",{class:ye($.squareTableCell,$.squareTableLabel,$.squareTableLabelRightBottom)},p?l.top:l.left),s("div",{class:$.squareTableCell}),s("div",{class:ye($.squareTableCell,$.squareTableLabel,$.squareTableLabelLeftBottom)},p?l.left:l.top)),s("div",{class:$.squareTableRow},s("div",{class:$.squareTableCell}),o,s("div",{class:$.squareTableCell})),s("div",{class:$.squareTableRow},s("div",{class:ye($.squareTableCell,$.squareTableLabel,$.squareTableLabelRightTop)},p?l.right:l.bottom),s("div",{class:$.squareTableCell}),s("div",{class:ye($.squareTableCell,$.squareTableLabel,$.squareTableLabelLeftTop)},p?l.bottom:l.right)))}function Ve(e,t,i){const r=`${i}_arrowStart`,l=`${i}_arrowEnd`,a=e==="left",o={markerStart:null,markerEnd:null};switch(t){case"HL":a?o.markerStart=`url(#${l})`:o.markerEnd=`url(#${r})`;break;case"LL":o.markerStart=`url(#${l})`;break;case"LH":a?o.markerEnd=`url(#${r})`:o.markerStart=`url(#${l})`;break;default:o.markerEnd=`url(#${r})`}return o}function $t(e,t,i={}){const{focus:r,numClasses:l,colors:a,rotation:o}=e,{opacity:y,cssEffectFilter:p,ariaLabel:m}=i,u=i.size??60,v=!!r,f=Math.sqrt(u**2+u**2)+(v?0:5),b=[],R=[],I=[],x=(u||75)/l;for(let pe=0;pe<l;pe++){const Ke=pe*x;for(let he=0;he<l;he++){const et=he*x,Fe=st(a[pe][he]),tt=nt(null),Ae={type:"rect",x:et,y:Ke,width:x,height:x},Se=it(Fe);Se&&b.push(Se);const qe=lt(Ae,Fe.fill,tt,null);qe&&R.push(qe),I.push(rt(Ae))}}const w=15,L=15,q=10;let F=null;v||(F="margin: -15px -15px -18px -15px");const M=Ve("left",r,t),C=Ve("right",r,t),_=at(I),N=Me(_,f,f,0,!1,o,!1),ne=Me(_,f,f,0,!1,v?-45:null,!1),oe={filter:p??void 0,opacity:y==null?"":`${y}`};return s("div",{class:v?$.diamondMidColRamp:$.squareTableCell,styles:oe},s("svg",{"aria-label":m,focusable:!1,height:f,role:"image",style:F,width:f,xmlns:bt},s("defs",null,s("marker",{id:`${t}_arrowStart`,markerHeight:"10",markerUnits:"strokeWidth",markerWidth:"10",orient:"auto",refX:"5",refY:"5"},s("polyline",{fill:"none",points:"0,0 5,5 0,10",stroke:"#555555","stroke-width":"1"})),s("marker",{id:`${t}_arrowEnd`,markerHeight:"10",markerUnits:"strokeWidth",markerWidth:"10",orient:"auto",refX:"0",refY:"5"},s("polyline",{fill:"none",points:"5,0 0,5 5,10",stroke:"#555555","stroke-width":"1"})),b),s("g",{transform:N},R),s("g",{transform:ne},s("line",{fill:"none","marker-end":M.markerEnd,"marker-start":M.markerStart,stroke:"#555555","stroke-width":"1",x1:-10,x2:-10,y1:u-w,y2:w}),s("line",{fill:"none","marker-end":C.markerEnd,"marker-start":C.markerStart,stroke:"#555555","stroke-width":"1",x1:L,x2:u-L,y1:u+q,y2:u+q}))))}const g="esri-legend--card",ce="esri-legend",d={base:g,stacked:`${ce}--stacked`,carouselTitle:`${g}__carousel-title`,intervalSeparator:`${g}__interval-separator`,imageryLayerStretchedImage:`${g}__imagery-layer-image--stretched`,imageLabel:`${g}__image-label`,layerCaption:`${g}__layer-caption`,labelElement:`${g}__label-element`,layerRow:`${g}__layer-row`,labelCell:`${g}__label-cell`,message:`${g}__message`,rampLabel:`${g}__ramp-label`,section:`${g}__section`,serviceCaptionText:`${g}__service-caption-text`,serviceContent:`${g}__service-content`,service:`${g}__service`,groupLayer:`${g}__group-layer`,groupLayerChild:`${g}__group-layer-child`,symbol:`${g}__symbol`,sizeRampRow:`${g}__size-ramp-row`,symbolRow:`${g}__symbol-row`,symbolCell:`${g}__symbol-cell`,carousel:`${g}__carousel`,carouselItem:`${g}__carousel-item`,intervalSeparatorsContainer:`${g}__interval-separators-container`,relationshipLabelContainer:`${g}__relationship-label-container`,labelContainer:`${g}__label-container`,serviceCaptionContainer:`${g}__service-caption-container`,symbolContainer:`${g}__symbol-container`,colorRampContainer:`${g}__color-ramp-container`,sizeRampContainer:`${g}__size-ramp-container`,sizeRampPreview:`${g}__size-ramp-preview`,pieChartRampPreview:`${g}__pie-chart-ramp-preview`,sizeRampHorizontal:`${ce}__size-ramp--horizontal`,rampLabelsContainer:`${ce}__ramp-labels`,layerInfo:`${ce}__layer-cell ${ce}__layer-cell--info`,univariateAboveAndBelowColorRamp:"esri-univariate-above-and-below-ramp__color--card"};function wt(e,t){return t}function k(e){const t=this;e.appendChild(t)}function H(e,t,i){if(!t)return;if(typeof t=="number")return t;if(typeof t=="string")return ot(t);if("value"in t||"unit"in t)return ee(e.dotValue,t);if("colorName"in t&&"bandName"in t)return e[t.colorName]+": "+(e[t.bandName]||t.bandName);if("showCount"in t)return t.showCount?e.clusterCountTitle:void 0;let r=null;return wt(t,i)?r=t.ratioPercentTotal?"showRatioPercentTotal":t.ratioPercent?"showRatioPercent":t.ratio?"showRatio":t.normField?"showNormField":t.field?"showField":null:je(t,i)&&(r=t.normField?"showNormField":t.normByPct?"showNormPct":t.field?"showField":null),r?ee(r==="showField"?"{field}":e[r],{field:t.field,normField:t.normField}):void 0}function je(e,t){return!t}function He(e,t){return!!(t&&t==="Stretched"&&"version"in e&&typeof e.version=="number"&&e.version>=10.3&&e.declaredClass==="esri.layers.ImageryLayer")}function Lt(e,t){return e.label?t[e.label]+": "+(typeof e.value=="string"?e.value:ct(e.value??0,{style:"decimal",notation:e.value?.toString().toLowerCase().includes("e")?"scientific":"standard"})):""}function Oe(e,t,i){switch(t){case"heatmap-ramp":return i[e.label]||e.label;case"stretch-ramp":return Lt(e,i);default:return e.label}}function Ue(e,t){if(!e.title||typeof e.title=="string")return e.title;const i=e.type==="color-ramp"||e.type==="opacity-ramp",r=e.title,l=H(t,r,i);return je(r,i)&&r.title?`${r.title} (${l})`:l}function We(e){return!(!e||typeof e!="object")}function ve(e,t){const i=H(e,t,!1),r=i?e.previewTemplateAriaLabel:e.previewAriaLabel;return ee(r,{label:i})}const _t=25,Et=25,Ct=100;let Z=class extends A{constructor(t,i){super(t,i),this.cssEffectFilter=null,this.legendElement=null,this.opacity=1}render(){const t=this.legendElement.infos.slice().reverse();return s("div",{class:this.classes(d.layerRow,d.colorRampContainer)},this._renderRampLabel(t[0]),s("div",{class:d.symbolContainer},this._renderPreview(t),this._renderMiddleStopRampLabel(t)),this._renderRampLabel(t.at(-1)))}_renderPreview(t){const{opacity:i}=this,r=this.legendElement.type==="heatmap-ramp",l=t.length-1,a=Et,o=l>2&&!r?_t*l:Ct,y=o+20,p=10,m=[[{shape:{type:"path",path:`M0 ${a/2} L${p} 0 L${p} ${a} Z`},fill:t[0].color,stroke:{width:0}},{shape:{type:"rect",x:p,y:0,width:o,height:a},fill:{type:"linear",x1:p,y1:0,x2:o+p,y2:0,colors:t.map((f,b)=>({color:f.color,offset:r&&"ratio"in f?f.ratio:b/l}))},stroke:{width:0}},{shape:{type:"path",path:`M${o+p} 0 L${y} ${a/2} L${o+p} ${a} Z`},fill:t[t.length-1].color,stroke:{width:0}}]],u=dt(m,y,a),v={filter:this.cssEffectFilter??void 0,opacity:i==null?void 0:`${i}`};return s("div",{styles:v},u)}_renderMiddleStopRampLabel(t){const i=t.length%2!=0?t[t.length/2|0]:null;return i?s("div",{class:d.intervalSeparatorsContainer},s("div",{class:d.intervalSeparator},"|"),this._renderRampLabel(i)):null}_renderRampLabel(t){return s("div",{class:d.rampLabel},Oe(t,this.legendElement.type,this.messages))}};n([c()],Z.prototype,"cssEffectFilter",void 0),n([c()],Z.prototype,"legendElement",void 0),n([c()],Z.prototype,"messages",void 0),n([c()],Z.prototype,"opacity",void 0),Z=n([S("esri.widgets.Legend.styles.card.ColorRamp")],Z);const kt="#ddd",T=window.devicePixelRatio,W="esri-spike-ramp",j={spikeRampContainer:`${W}__container`,spikeRampPreviewContainer:`${W}__preview-container`,spikeRampPreview:`${W}__preview`,spikeRampSymbolPreview:`${W}__symbol-preview`,spikeRampLines:`${W}__lines`,spikeRampLabelsContainer:`${W}__labels-container`,spikeRampLabel:`${W}__label`};function Ze(e){return e.infos.length!==5?null:s("div",{class:j.spikeRampContainer},s("div",{class:j.spikeRampPreviewContainer},Rt(e),xt(e)),It(e))}function Rt(e){const[t,i,r]=Re(e).map(({preview:l})=>{if(!l)return null;const a=l.cloneNode(!0);return a.classList.add(j.spikeRampSymbolPreview),a});return t&&i&&r?s("div",{class:j.spikeRampPreview},s("div",{afterCreate:k,bind:r}),s("div",{afterCreate:k,bind:i}),s("div",{afterCreate:k,bind:t})):null}function xt(e){const[{width:t,height:i},{width:r},{width:l,height:a}]=Re(e).map(({size:N})=>We(N)?{width:D(N.width),height:D(N.height)}:{width:0,height:0}),o=10,y=8,p=t+r+l+3*o,m=i,u=document.createElement("canvas");u.width=(p+o)*T,u.height=m*T,u.style.width=u.width/T+"px",u.style.height=u.height/T+"px";const v=u.getContext("2d");v.beginPath();const f=p-(t/2+o),b=0,R=p+y;v.moveTo(f*T,b*T),v.lineTo(R*T,0*T);const x=(p-y)/2,w=(i-a)/2,L=p+y,q=(i-a)/2;v.moveTo(x*T,w*T),v.lineTo(L*T,q*T);const F=l/2,M=m-a,C=p+y,_=m-a;return v.moveTo(F*T,M*T),v.lineTo(C*T,_*T),v.strokeStyle=kt,v.lineWidth=.5*T,v.stroke(),s("div",{afterCreate:k,bind:u,class:j.spikeRampLines})}function It(e){const[{label:t,height:i},{label:r},{label:l,height:a}]=Re(e).map(({label:u,size:v})=>({label:u,height:We(v)?D(v.height):0})),o=i-a,y={position:"absolute",top:"0"},p={position:"absolute",top:o/2+"px"},m={position:"absolute",top:`${o}px`};return s("div",{class:j.spikeRampLabelsContainer},s("div",{class:j.spikeRampLabel,styles:y},t),s("div",{class:j.spikeRampLabel,styles:p},r),s("div",{class:j.spikeRampLabel,styles:m},l))}function Re(e){return e.infos.filter((t,i)=>i%2==0)}const zt="#ddd",se=window.devicePixelRatio;function Tt(e){if(!e)return;if(e.type.includes("3d")){if(!e.symbolLayers?.length)return;const i=e.symbolLayers.at(-1),r=i.resource?.primitive;return r==="circle"||r==="cross"||r==="kite"||r==="sphere"||r==="cube"||r==="diamond"}const t=e.style;return t==="circle"||t==="diamond"||t==="cross"}function Ft(e){if(e){if(e.type.includes("3d")){if(!e.symbolLayers?.length)return;const t=e.symbolLayers.at(-1),i=t?.resource?.primitive;return i==="triangle"||i==="cone"||i==="tetrahedron"}return e.style==="triangle"}}let X=class extends A{constructor(t,i){super(t,i),this.hasIndicators=!1,this.legendElement=null,this.opacity=1}render(){if(this.legendElement.theme==="spike")return s("div",{styles:{display:"flex",flex:"1",justifyContent:"center"}},Ze(this.legendElement));const{legendElement:t,hasIndicators:i,opacity:r}=this,l=t.infos,a=l.at(0),o=l.at(-1);if(!a||!o)return null;const{label:y,...p}=a,{label:m,...u}=o;let v=p.preview,f=u.preview;const b={"flex-direction":i?"column":"row-reverse"};if(!v||!f)return null;v=v.cloneNode(!0),v.style.display="flex",f=f.cloneNode(!0),f.style.display="flex";const R={opacity:`${r??""}`};return s("div",{class:this.classes(d.layerRow,{[d.sizeRampRow]:i})},s("div",{class:d.rampLabel},i?y:m),s("div",{class:d.sizeRampContainer,styles:b},s("div",{afterCreate:k,bind:v,class:d.sizeRampPreview,styles:R}),this._renderSizeRampLines(t),s("div",{afterCreate:k,bind:f,class:d.sizeRampPreview,styles:R})),s("div",{class:d.rampLabel},i?m:y))}_renderSizeRampLines(t){const i=t.infos,r=i.at(0),l=i.at(-1);if(!r||!l)return null;const a=r.symbol,o=this.hasIndicators,y=r.size&&typeof r.size=="number"?r.size:0,p=l.size&&typeof l.size=="number"?l.size:0,m=r.outlineSize||0,u=l.outlineSize||0,v=D(y+m)*se,f=D(p+u)*se,b=o?v:v+50*se,R=o?v/2+50*se:v,I=Ft(a),x=Tt(a),w=document.createElement("canvas");w.width=b,w.height=R,w.style.width=w.width/se+"px",w.style.height=w.height/se+"px";const L=w.getContext("2d");if(o){L.beginPath();const q=0,F=0,M=b/2-f/2,C=R;L.moveTo(q,F),L.lineTo(M,C);const _=b,N=0,ne=b/2+f/2,oe=R;L.moveTo(_,N),L.lineTo(ne,oe)}else{L.beginPath();const q=0,F=R/2-f/2,M=b;L.moveTo(q,F),L.lineTo(M,0);const _=0,N=R/2+f/2,ne=b,oe=R;L.moveTo(_,N),L.lineTo(ne,oe)}return L.strokeStyle=zt,L.stroke(),s("div",{afterCreate:k,bind:w,styles:o?{display:"flex",marginTop:`-${I?0:x?v/2:0}px`,marginBottom:`-${I?f:x?f/2:0}px`}:{display:"flex",marginRight:`-${I?0:x?v/2:0}px`,marginLeft:`-${I?0:x?f/2:0}px`}})}};n([c()],X.prototype,"hasIndicators",void 0),n([c()],X.prototype,"legendElement",void 0),n([c()],X.prototype,"messages",void 0),n([c()],X.prototype,"opacity",void 0),X=n([S("esri.widgets.Legend.styles.card.SizeRamp")],X);const At=ht(),Xe=10,xe=20,fe=10,Ie=20,ze={univariateAboveAndBelowSymbol:"esri-univariate-above-and-below-ramp__symbol",colorRamp:"esri-legend__color-ramp"};function St(e="vertical"){const t="stroke:rgb(200, 200, 200);stroke-width:1";return e==="vertical"?s("svg",{height:"4",width:"10"},s("line",{style:t,x1:"0",x2:"10",y1:"2",y2:"2"})):s("svg",{height:"10",width:"10"},s("line",{style:t,x1:"5",x2:"5",y1:"0",y2:"10"}))}function qt(e,t="vertical"){const i=document.createElement("div");return i.style.height=`${xe}px`,i.className=ze.univariateAboveAndBelowSymbol,e!=null&&(i.style.opacity=e.toString()),At.append(i,St.bind(null,t)),i}function Ye(e,t,i="vertical",r){e.infos.forEach((l,a)=>{if(r&&a===2)l.preview=qt(t,i);else{const o=(le(l.size)?D(l.size):0)+(i==="horizontal"?Ie:fe),y=l.preview,p=y?.tagName.toLowerCase()==="div",m=p?y:document.createElement("div");m.className=ze.univariateAboveAndBelowSymbol,i==="horizontal"?m.style.width=`${o}px`:m.style.height=`${o}px`,!p&&y&&m.appendChild(y),l.preview=m}})}function ge(e,t="classic"){const i=e.infos,r=i.at(0),l=i.at(-1),a=le(r.size)?D(r.size):0,o=le(l.size)?D(l.size):0;return t==="classic"?(a+fe)/2:(a-o)/2}function re(e,t){if(!e)return null;const i=e.infos.map(l=>l.color),r=pt(t.type==="full"?i:t.type==="above"?i.slice(0,3):i.slice(2,5),{width:t.width,height:t.height,align:t.rampAlignment,cssEffectFilter:t.cssEffectFilter,ariaLabel:t.ariaLabel});return r.className=ze.colorRamp,t.opacity!=null&&(r.style.opacity=t.opacity.toString()),r}function Te(e,t,i,r="vertical"){let l=0;const a=e.infos,o=Math.floor(a.length/2),y=t==="full"||t==="above"?0:o,p=t==="full"||t==="below"?a.length-1:o;for(let m=y;m<=p;m++)if(i&&m===o)l+=r==="horizontal"?Xe:xe;else{const u=a[m].size;l+=(le(u)?D(u):0)+(r==="horizontal"?Ie:fe)}return Math.round(l)}function ae(e,t,i,r="vertical"){const l=Te(e,t,i,r),a=e.infos,o=Math.floor(a.length/2),y=t==="full"||t==="above"?0:o,p=t==="full"||t==="below"?a.length-1:o,m=le(a[y].size)?a[y].size:0,u=le(a[p].size)?a[p].size:0,v=t==="full"?m+u:t==="above"?m:u,f=i?r==="vertical"?xe:Xe:0,b=r==="vertical"?fe*(t==="full"?2:1):Ie*(t==="full"?2:1);return Math.round(l-(D(v)/2+f/2+b/2))}function Qe(e,t,i="vertical"){const r=e.infos;let l=r.find(({type:o})=>o==="size-ramp"),a=r.find(({type:o})=>o==="color-ramp");return l&&(l={...l},l.infos=[...l.infos],Ye(l,t,i,!0)),a&&(a={...a},a.infos=[...a.infos]),i==="horizontal"&&(l?.infos.reverse(),a?.infos.reverse()),{sizeRampElement:l,colorRampElement:a}}function Ge(e,t="vertical"){const i=e.infos;let r=i.find(({type:a})=>a==="size-ramp"),l=i.find(({type:a})=>a==="color-ramp");return r&&(r={...r},r.infos=[...r.infos],Ye(r,null,t,!1)),l&&(l={...l},l.infos=[...l.infos]),t==="horizontal"&&(r?.infos.reverse(),l?.infos.reverse()),{sizeRampElement:r,colorRampElement:l}}const _e={marginLeft:"3px"},ie={display:"table-cell",verticalAlign:"middle"},Je={display:"flex",alignItems:"flex-start"};let Y=class extends A{constructor(t,i){super(t,i),this.cssEffectFilter=null,this.legendElement=null,this.opacity=1}render(){const{legendElement:t,opacity:i,cssEffectFilter:r,key:l}=this,{sizeRampElement:a,colorRampElement:o}=Qe(t,i,"horizontal");if(!a)return null;const y=Te(a,"full",!0,"horizontal"),p=ae(a,"above",!0,"horizontal"),m=ae(a,"below",!0,"horizontal"),u=12,v=this.messages?.previewColorRampAriaLabel,f=re(o,{width:p,height:u,rampAlignment:"horizontal",opacity:i,type:"above",cssEffectFilter:r,ariaLabel:v}),b=re(o,{width:m,height:u,rampAlignment:"horizontal",opacity:i,type:"below",cssEffectFilter:r,ariaLabel:v}),R=ge(a,"card"),I=a.infos.map(C=>C.label),x=I.length-1,w=I.map((C,_)=>_===0||_===x?s("div",{key:_},C):null),L={display:"flex",flexDirection:"column"},q={display:"flex",flexDirection:"row"},F={marginTop:"3px",display:"flex"};ke(this.container)?F.marginRight=`${R}px`:F.marginLeft=`${R}px`;const M={width:`${y}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return s("div",{class:d.layerRow,key:`${l}-container`,styles:L},s("div",{class:this.classes(d.symbolContainer,d.sizeRampHorizontal),styles:q},a.infos.map((C,_)=>s("div",{afterCreate:k,bind:C.preview,class:d.symbol,key:_}))),f?s("div",{class:d.univariateAboveAndBelowColorRamp,key:"color-ramp-preview",styles:F},s("div",{afterCreate:k,bind:f}),s("div",{afterCreate:k,bind:b})):null,s("div",{class:d.layerInfo},s("div",{class:d.rampLabelsContainer,styles:M},w)))}};n([c()],Y.prototype,"cssEffectFilter",void 0),n([c()],Y.prototype,"legendElement",void 0),n([c()],Y.prototype,"messages",void 0),n([c()],Y.prototype,"opacity",void 0),Y=n([S("esri.widgets.Legend.styles.card.UnivariateAboveAndBelowRamp")],Y);let Q=class extends A{constructor(t,i){super(t,i),this.cssEffectFilter=null,this.legendElement=null,this.opacity=1}render(){const{legendElement:t,opacity:i,cssEffectFilter:r,key:l}=this,{sizeRampElement:a,colorRampElement:o}=Ge(t,"horizontal");if(!a)return null;const y=Te(a,"full",!1,"horizontal"),p=ae(a,"full",!1,"horizontal"),m=re(o,{width:p,height:12,rampAlignment:"horizontal",opacity:i,type:"full",cssEffectFilter:r,ariaLabel:this.messages?.previewColorRampAriaLabel}),u=ge(a,"card"),v=a.infos.length-1,f=a.infos.map((w,L)=>L===0||L===v?s("div",{key:L},w.label):null),b={display:"flex",flexDirection:"column"},R={display:"flex",flexDirection:"row"},I={marginTop:"3px",display:"flex"};ke(this.container)?I.marginRight=`${u}px`:I.marginLeft=`${u}px`;const x={width:`${y}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return s("div",{class:d.layerRow,key:`${l}-container`,styles:b},s("div",{class:this.classes(d.symbolContainer,d.sizeRampHorizontal),styles:R},a.infos.map((w,L)=>s("div",{afterCreate:k,bind:w.preview,class:d.symbol,key:L}))),s("div",{class:d.univariateAboveAndBelowColorRamp,key:"color-ramp-preview",styles:I},s("div",{afterCreate:k,bind:m})),s("div",{class:d.layerInfo},s("div",{class:d.rampLabelsContainer,styles:x},f)))}};n([c()],Q.prototype,"cssEffectFilter",void 0),n([c()],Q.prototype,"legendElement",void 0),n([c()],Q.prototype,"messages",void 0),n([c()],Q.prototype,"opacity",void 0),Q=n([S("esri.widgets.Legend.styles.card.UnivariateColorSizeRamp")],Q);var Ee;let B=Ee=class extends A{constructor(e,t){super(e,t),this.cssEffectFilter=null,this.hasIndicators=!1,this.headingLevel=3,this.isChild=!1,this.legendElement=null}render(){const e=this._renderLegendElement(),t=Ue(this.legendElement,this.messages),i=this.hasIndicators&&!this.isChild?s("div",null,s(me,{class:d.carouselTitle,level:this.headingLevel},this.activeLayerInfo.title),s(me,{class:d.layerCaption,level:gt(this.headingLevel)},t)):t?s(me,{class:d.layerCaption,level:this.headingLevel},t):null;return s("section",{"aria-labelledby":this.key,class:d.section,id:`${this.key}-panel`,key:this.key,role:"tabpanel",tabIndex:0},i,e)}_renderLegendElement(){switch(this.legendElement.type){case"symbol-table":return this._renderSymbolTable(this.legendElement);case"size-ramp":return s(X,{hasIndicators:this.hasIndicators,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"color-ramp":case"opacity-ramp":case"heatmap-ramp":case"stretch-ramp":return s(Z,{cssEffectFilter:this.cssEffectFilter,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"relationship-ramp":return De(this.legendElement,this.id,{opacity:this.layer.opacity,cssEffectFilter:this.cssEffectFilter,ariaLabel:this.messages.previewRelationshipRampAriaLabel,key:this.key});case"pie-chart-ramp":{const{preview:e}=this.legendElement;if(!e)return null;const t=ee(this.messages.previewPieChartAriaLabel,{label:null});return t&&e.querySelector("svg")?.setAttribute("aria-label",t),s("div",{afterCreate:k,bind:e,class:d.pieChartRampPreview,key:`${this.key}-preview`})}case"univariate-above-and-below-ramp":return s(Y,{cssEffectFilter:this.cssEffectFilter,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"univariate-color-size-ramp":return s(Q,{cssEffectFilter:this.cssEffectFilter,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});default:return null}}_renderSymbolTable(e){const t=e.infos.map(a=>this._renderElementInfo(a,e.legendType)).filter(Boolean);if(!t.length)return null;const i=this.activeLayerInfo.legendElements.some(({type:a})=>a==="relationship-ramp"),r=t[0]?.properties?.classes?.[d.symbolRow],l={[d.labelContainer]:!r&&!i,[d.relationshipLabelContainer]:i};return s("div",{class:this.classes(l)},t)}_renderElementInfo(e,t){const{layer:i}=this,r="label"in e?e.label:null,l=`${this.key}-${r}`;if("type"in e&&e.type)return s(Ee,{activeLayerInfo:this.activeLayerInfo,cssEffectFilter:this.cssEffectFilter,hasIndicators:this.hasIndicators,headingLevel:this.headingLevel,isChild:!0,key:l,layer:i,legendElement:e,messages:this.messages});if(!("preview"in e&&e.preview||"src"in e&&e.src))return null;const a=He(i,t),o=H(this.messages,r,!1)||"";if("src"in e&&e.src)return s("div",{class:d.layerRow,key:`${l}-row`},this._renderImage(e,i,a),s("div",{class:d.imageLabel},o));if("symbol"in e&&e.preview){if(!e.symbol?.type.includes("simple-fill")){if(!e.label)return s("div",{afterCreate:k,bind:e.preview,key:`${l}-row`});const y={[d.symbolCell]:this.hasIndicators},{preview:p}=e,m="previewAriaLabel"in e?e.previewAriaLabel:null,u="label"in e?H(this.messages,e.label,!1):null,v=p.querySelector("svg"),f=ve(this.messages,m||u);return f&&v&&v.setAttribute("aria-label",f),s("div",{class:this.classes(d.layerRow,{[d.symbolRow]:this.hasIndicators}),key:`${l}-row`},s("div",{afterCreate:k,bind:p,class:this.classes(y)}),s("div",{class:this.classes(d.imageLabel,{[d.labelCell]:this.hasIndicators})},o))}return s("div",{class:d.layerRow,key:`${l}-row`},s("div",{class:d.labelElement,styles:this._getBackgroundStyles(e)},o))}return null}_getBackgroundStyles(e){const t=e.symbol,i=t.color,r=!!i?.a,l="outline"in t?t.outline:null,a=!!l?.color?.a,o=new be(r&&i?[i.r,i.g,i.b,i.a*this.layer.opacity]:[255,255,255,0]),y=a&&l.color?new be([l.color.r,l.color.g,l.color.b,l.color.a*this.layer.opacity]):new be([255,255,255,0]),p=e.symbol.color?.isBright??!0,m=p?"black":"white",u=p?"rgba(255, 255, 255, .6)":"rgba(0, 0, 0, .6)";return{background:r?o.toCss(!0):"none",color:m,textShadow:`-1px -1px 0 ${u},
                  1px -1px 0 ${u},
                  -1px 1px 0 ${u},
                  1px 1px 0 ${u}`,border:a?`1px solid ${y.toCss(!0)}`:"none",filter:this.cssEffectFilter??void 0}}_renderImage(e,t,i){const{previewAriaLabel:r,src:l,opacity:a}=e,o=H(this.messages,e.label,!1),y={[d.imageryLayerStretchedImage]:i,[d.symbol]:!i},p={opacity:`${a??t.opacity}`},m=ve(this.messages,r||o);return s("img",{alt:m,"aria-label":m,border:0,class:this.classes(y),height:e.height,src:l,styles:p,width:e.width})}};n([c()],B.prototype,"activeLayerInfo",void 0),n([c()],B.prototype,"cssEffectFilter",void 0),n([c()],B.prototype,"hasIndicators",void 0),n([c()],B.prototype,"headingLevel",void 0),n([c()],B.prototype,"isChild",void 0),n([c()],B.prototype,"layer",void 0),n([c()],B.prototype,"legendElement",void 0),n([c()],B.prototype,"messages",void 0),B=Ee=n([S("esri.widgets.Legend.styles.card.LegendElement")],B);const Mt=768;let P=class extends A{constructor(t,i){super(t,i),this._hasIndicators=!1,this.activeLayerInfos=null,this.headingLevel=3,this.layout="stack",this.messages=null,this.messagesCommon=null,this.type="card",this.view=null}loadDependencies(){return yt({carousel:()=>Be(()=>import("./index-Bkom2Sdc.js").then(t=>t.zD),__vite__mapDeps([0,1])),"carousel-item":()=>Be(()=>import("./index-Bkom2Sdc.js").then(t=>t.zE),__vite__mapDeps([0,1]))})}render(){this._hasIndicators=this.layout==="auto"&&this.view&&this.view.container.clientWidth<=Mt||this.layout==="stack";const t=this._hasIndicators?this._renderCarousel():this._renderLayers(),i={[d.stacked]:this._hasIndicators};return s("div",{class:this.classes(d.base,i)},t||s("div",{class:d.message},this.messages.noLegend))}_renderCarousel(){const t=[],i=this.activeLayerInfos;if(i)for(const r of i)this._renderSections(r,t);return t?.length?s("calcite-carousel",{class:d.carousel,label:this.messages.carousel},t.map((r,l)=>s("calcite-carousel-item",{class:d.carouselItem,key:l,label:ee(this.messagesCommon.pagination.pageText,{index:l+1,total:t.length})},r))):null}_renderLayers(){const t=this.activeLayerInfos,i=t?.toArray()?.map(r=>this._renderLegendForLayer(r)).filter(Boolean);return i?.length?i:null}_renderLegendForLayer(t){if(!t.ready)return null;if(t.children.length){const i=t.children.toArray().map(this._renderLegendForLayer,this);return s("section",{class:this.classes(d.service,d.groupLayer),key:t.layer.uid},s("div",{class:d.serviceCaptionContainer},t.title),i)}return this._renderLegendElementsForLayer(t)}_renderLegendElementsForLayer(t){const i=t.legendElements?.filter(Boolean);if(!i?.length)return null;const r=i.map(a=>s(B,{activeLayerInfo:t,cssEffectFilter:t.cssEffectFilter,hasIndicators:this._hasIndicators,headingLevel:this.headingLevel,isChild:!1,key:`${t.layer.uid}-${a.type}`,layer:t.layer,legendElement:a,messages:this.messages})),l={[d.groupLayerChild]:!!t.parent};return s("section",{class:this.classes(d.service,l),key:t.layer.uid},s("div",{class:d.serviceCaptionContainer},s("div",{class:d.serviceCaptionText},t.title)),s("div",{class:d.serviceContent},r))}_renderSections(t,i){if(!t.ready)return;if(t.children.length)for(const l of t.children)this._renderSections(l,i);const r=t.legendElements;if(r?.length)for(const l of r){const a=s(B,{activeLayerInfo:t,cssEffectFilter:t.cssEffectFilter,hasIndicators:this._hasIndicators,headingLevel:this.headingLevel,isChild:!1,key:`${t.layer.uid}-${l.type}`,layer:t.layer,legendElement:l,messages:this.messages});a&&i.push(a)}}};n([c()],P.prototype,"activeLayerInfos",void 0),n([c()],P.prototype,"headingLevel",void 0),n([c()],P.prototype,"layout",void 0),n([c(),ue("esri/widgets/Legend/t9n/Legend")],P.prototype,"messages",void 0),n([c(),ue("esri/t9n/common")],P.prototype,"messagesCommon",void 0),n([c({readOnly:!0})],P.prototype,"type",void 0),n([c()],P.prototype,"view",void 0),P=n([S("esri.widgets.Legend.styles.card.CardView")],P);const E="esri-legend",h={service:`${E}__service`,label:`${E}__service-label`,layer:`${E}__layer`,groupLayer:`${E}__group-layer`,groupLayerChild:`${E}__group-layer-child`,layerTable:`${E}__layer-table`,layerTableSizeRamp:`${E}__layer-table--size-ramp`,layerChildTable:`${E}__layer-child-table`,layerCaption:`${E}__layer-caption`,layerBody:`${E}__layer-body`,layerRow:`${E}__layer-row`,layerInfo:`${E}__layer-cell ${E}__layer-cell--info`,imageryLayerStretchedImage:`${E}__imagery-layer-image--stretched`,imageryLayerInfoStretched:`${E}__imagery-layer-info--stretched`,symbolContainer:`${E}__layer-cell ${E}__layer-cell--symbols`,symbol:`${E}__symbol`,rampContainer:`${E}__ramps`,sizeRamp:`${E}__size-ramp`,colorRamp:`${E}__color-ramp`,opacityRamp:`${E}__opacity-ramp`,rampLabelsContainer:`${E}__ramp-labels`,rampLabel:`${E}__ramp-label`,message:`${E}__message`,univariateAboveAndBelowLabel:"esri-univariate-above-and-below-ramp__label"},Bt=24;let G=class extends A{constructor(e,t){super(e,t),this.legendElement=null,this.opacity=1}get _preview(){const e=this.legendElement.preview;if(!e)return null;const t=this.legendElement.type==="opacity-ramp"?h.opacityRamp:"";return e.className=`${h.colorRamp} ${t}`,this.opacity!=null&&(e.style.opacity=this.opacity.toString()),e}render(){const{legendElement:e,_preview:t}=this;if(!t)return null;const i={width:`${Bt}px`},r={height:t.style.height},l=ee(this.messages.previewColorRampAriaLabel,{label:null});return l&&t.querySelector("svg")?.setAttribute("aria-label",l),s("div",{class:h.layerRow,key:`${this.key}-row`},s("div",{class:h.symbolContainer,styles:i},s("div",{afterCreate:k,bind:t,class:h.rampContainer})),s("div",{class:h.layerInfo},s("div",{class:h.rampLabelsContainer,styles:r},e.infos.map((a,o)=>this._renderRampLabel(a,o,e.type)))))}_renderRampLabel(e,t,i){return s("div",{class:e.label?h.rampLabel:void 0,key:`${this.key}-stop-${e.label??t}-label`},Oe(e,i,this.messages))}};n([c()],G.prototype,"_preview",null),n([c()],G.prototype,"legendElement",void 0),n([c()],G.prototype,"messages",void 0),n([c()],G.prototype,"opacity",void 0),G=n([S("esri.widgets.Legend.styles.classic.ColorRamp")],G);let de=class extends A{constructor(e,t){super(e,t),this.legendElement=null}render(){const e=this.legendElement.infos.map(t=>this._renderRow(t)).filter(Boolean);return e.length?this.legendElement.theme==="spike"?Ze(this.legendElement):s("div",{class:h.layerBody},e):null}_renderRow(e){return e.preview?s("div",{class:h.layerRow,key:`${this.key}-${e.label}-row`},s("div",{class:this.classes(h.symbolContainer,h.sizeRamp)},s("div",{afterCreate:k,bind:e.preview,class:h.symbol})),s("div",{class:h.layerInfo},H(this.messages,e.label,!1)||"")):null}};n([c()],de.prototype,"legendElement",void 0),n([c()],de.prototype,"messages",void 0),de=n([S("esri.widgets.Legend.styles.classic.SizeRamp")],de);let J=class extends A{constructor(e,t){super(e,t),this.cssEffectFilter=null,this.legendElement=null,this.opacity=1}render(){const{legendElement:e,opacity:t,cssEffectFilter:i,key:r}=this,{sizeRampElement:l,colorRampElement:a}=Qe(e,t);if(!l)return null;const o=this.messages.previewColorRampAriaLabel,y=ae(l,"above",!0),p=ae(l,"below",!0),m=12,u=re(a,{width:m,height:y,rampAlignment:"vertical",opacity:t,type:"above",cssEffectFilter:i,ariaLabel:o}),v=re(a,{width:m,height:p,rampAlignment:"vertical",opacity:t,type:"below",cssEffectFilter:i,ariaLabel:o}),f=ge(l),b=l.infos.map(C=>C.label),R=b.map((C,_)=>_===0?s("div",{class:C?u?h.univariateAboveAndBelowLabel:h.rampLabel:void 0,key:`${r}-color-ramp-above-label-${C??_}`},C):_===2?s("div",null):null),I=b.length-1,x=Math.floor(b.length/2),w=b.map((C,_)=>_===x||_===I?s("div",{class:C?u?h.univariateAboveAndBelowLabel:h.rampLabel:void 0,key:`${r}-color-ramp-below-label-${C??_}`},C):null),L={display:"table-cell",verticalAlign:"middle"},q={marginTop:`${f}px`},F={height:`${y}px`},M={height:`${p}px`};return s("div",{key:`${r}-container`,styles:Je},s("div",{class:h.layerBody},l.infos.map((C,_)=>s("div",{class:this.classes(h.layerRow,h.sizeRamp),key:`${r}-row-${_}`},s("div",{afterCreate:k,bind:C.preview,class:h.symbol,styles:L}),u||_%2!=0?null:s("div",{class:h.layerInfo},b[_])))),u?s("div",{styles:q},s("div",{styles:_e},s("div",{styles:ie},s("div",{afterCreate:k,bind:u,class:h.rampContainer})),s("div",{styles:ie},s("div",{class:h.rampLabelsContainer,styles:F},R))),s("div",{styles:_e},s("div",{styles:ie},s("div",{afterCreate:k,bind:v,class:h.rampContainer})),s("div",{styles:ie},s("div",{class:h.rampLabelsContainer,styles:M},w)))):null)}};n([c()],J.prototype,"cssEffectFilter",void 0),n([c()],J.prototype,"legendElement",void 0),n([c()],J.prototype,"messages",void 0),n([c()],J.prototype,"opacity",void 0),J=n([S("esri.widgets.Legend.styles.classic.UnivariateAboveAndBelowRamp")],J);let K=class extends A{constructor(t,i){super(t,i),this.cssEffectFilter=null,this.legendElement=null,this.opacity=1}render(){const{legendElement:t,opacity:i,cssEffectFilter:r,key:l}=this,{sizeRampElement:a,colorRampElement:o}=Ge(t);if(!a)return null;const y=ge(a),p=12,m=ae(a,"full",!1),u=re(o,{width:p,height:m,rampAlignment:"vertical",opacity:i,type:"full",cssEffectFilter:r,ariaLabel:this.messages?.previewColorRampAriaLabel}),v=a.infos.length-1,f=a.infos.map((x,w)=>w===0||w===v?s("div",{class:x.label?o?h.univariateAboveAndBelowLabel:h.rampLabel:void 0,key:`${l}-color-ramp-label-${x.label??w}`},x.label):null),b={display:"table-cell",verticalAlign:"middle"},R={marginTop:`${y}px`},I={height:`${m}px`};return s("div",{key:`${l}-container`,styles:Je},s("div",{class:h.layerBody},a.infos.map((x,w)=>s("div",{class:this.classes(h.layerRow,h.sizeRamp),key:`${l}-row-${w}`},s("div",{afterCreate:k,bind:x.preview,class:h.symbol,styles:b})))),s("div",{styles:R},s("div",{styles:_e},s("div",{styles:ie},s("div",{afterCreate:k,bind:u,class:h.rampContainer})),s("div",{styles:ie},s("div",{class:h.rampLabelsContainer,styles:I},f)))))}};n([c()],K.prototype,"cssEffectFilter",void 0),n([c()],K.prototype,"legendElement",void 0),n([c()],K.prototype,"messages",void 0),n([c()],K.prototype,"opacity",void 0),K=n([S("esri.widgets.Legend.styles.classic.UnivariateColorSizeRamp")],K);var Ce;let U=Ce=class extends A{constructor(e,t){super(e,t),this.cssEffectFilter=null,this.isChild=!1,this.legendElement=null}render(){const e=this._renderLegendElement(),t=Ue(this.legendElement,this.messages),i=this.isChild?h.layerChildTable:h.layerTable,r=t?s("div",{class:h.layerCaption},t):null,l={[h.layerTableSizeRamp]:this.legendElement.type==="size-ramp"||!this.isChild};return s("section",{class:this.classes(i,l),key:`${this.key}-table`},r,e)}_renderLegendElement(){switch(this.legendElement.type){case"symbol-table":return this._renderSymbolTable(this.legendElement);case"size-ramp":return s(de,{key:this.key,legendElement:this.legendElement,messages:this.messages});case"color-ramp":case"opacity-ramp":case"heatmap-ramp":case"stretch-ramp":return s(G,{key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"relationship-ramp":return De(this.legendElement,this.id,{opacity:this.layer.opacity,cssEffectFilter:this.cssEffectFilter,ariaLabel:this.messages.previewRelationshipRampAriaLabel,key:this.key});case"pie-chart-ramp":{const{preview:e}=this.legendElement;if(!e)return null;const t=ee(this.messages.previewPieChartAriaLabel,{label:null});return t&&e.querySelector("svg")?.setAttribute("aria-label",t),s("div",{afterCreate:k,bind:e,key:`${this.key}-preview`})}case"univariate-above-and-below-ramp":return s(J,{cssEffectFilter:this.cssEffectFilter,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"univariate-color-size-ramp":return s(K,{cssEffectFilter:this.cssEffectFilter,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});default:return null}}_renderSymbolTable(e){const t=e.infos.map(i=>this._renderElementInfo(i,e.legendType)).filter(Boolean);return t.length?s("div",{class:h.layerBody},t):null}_renderElementInfo(e,t){const{layer:i}=this,r="label"in e?e.label:null,l=`${this.key}-${r}`;if("type"in e&&e.type)return s(Ce,{cssEffectFilter:this.cssEffectFilter,isChild:!0,key:l,layer:i,legendElement:e,messages:this.messages});if(!("preview"in e&&e.preview||"src"in e&&e.src))return null;const a=He(i,t),o={[h.imageryLayerInfoStretched]:a},y={[h.imageryLayerInfoStretched]:a};return s("div",{class:h.layerRow,key:`${l}-row`},s("div",{class:this.classes(h.symbolContainer,y)},this._renderPreview(e,a)),s("div",{class:this.classes(h.layerInfo,o)},H(this.messages,r,!1)||""))}_renderPreview(e,t){const{layer:i}=this;if("preview"in e&&e.preview){const{preview:r}=e,l="previewAriaLabel"in e?e.previewAriaLabel:null,a="label"in e?H(this.messages,e.label,!1):null,o=r.querySelector("svg"),y=ve(this.messages,l||a);return y&&o&&o.setAttribute("aria-label",y),s("div",{afterCreate:k,bind:r,class:h.symbol})}return"src"in e&&e.src?this._renderImage(e,i,t):null}_renderImage(e,t,i){const{previewAriaLabel:r,src:l,opacity:a}=e,o=H(this.messages,e.label,!1),y={[h.imageryLayerStretchedImage]:i,[h.symbol]:!i},p={opacity:`${a??t.opacity}`},m=ve(this.messages,r||o);return s("img",{alt:m,"aria-label":m,border:0,class:this.classes(y),height:e.height,src:l,styles:p,width:e.width})}};n([c()],U.prototype,"cssEffectFilter",void 0),n([c()],U.prototype,"isChild",void 0),n([c()],U.prototype,"layer",void 0),n([c()],U.prototype,"legendElement",void 0),n([c()],U.prototype,"messages",void 0),U=Ce=n([S("esri.widgets.Legend.styles.classic.LegendElement")],U);const Pt=`${E}__`;let V=class extends A{constructor(e,t){super(e,t),this.activeLayerInfos=null,this.headingLevel=3,this.messages=null,this.type="classic"}render(){const e=this.activeLayerInfos,t=e?.toArray().map(i=>this._renderLegendForLayer(i)).filter(Boolean);return t?.length?s("section",null,t):s("div",{class:h.message,key:"no-legend"},this.messages.noLegend)}_renderLegendForLayer(e,t){if(!e.ready)return null;const i=`${e.layer.uid}-version-${e.version}`,r=`${Pt}${t?`${t}-`:""}${i}`,l=e.title?me({level:this.headingLevel,class:this.classes(Le.heading,h.label)},e.title):null;if(e.children.length){const a=e.children.toArray().map(o=>this._renderLegendForLayer(o,i));return s("section",{class:this.classes(h.service,h.groupLayer),key:r},l,a)}return this._renderLegendElementsForLayer(e,l,r)}_renderLegendElementsForLayer(e,t,i){const r=e.legendElements?.filter(Boolean);if(!r?.length)return null;const l=r.map(o=>s(U,{cssEffectFilter:e.cssEffectFilter,isChild:!1,key:`${i}-${o.type}`,layer:e.layer,legendElement:o,messages:this.messages})),a={[h.groupLayerChild]:!!e.parent};return s("section",{class:this.classes(h.service,a),key:i},t,s("div",{class:h.layer},l))}};n([c()],V.prototype,"activeLayerInfos",void 0),n([c()],V.prototype,"headingLevel",void 0),n([c(),ue("esri/widgets/Legend/t9n/Legend")],V.prototype,"messages",void 0),n([c({readOnly:!0})],V.prototype,"type",void 0),V=n([S("esri.widgets.Legend.styles.classic.ClassicView")],V);const Vt={base:"esri-legend"};let z=class extends A{constructor(e,t){super(e,t),this.headingLevel=3,this.messages=null,this.viewModel=new mt,this.style=new V,ut(vt.getLogger(this),"Legend","arcgis-legend",{version:"4.34"})}initialize(){this.addHandles([$e(()=>this.view,"resize",()=>this.scheduleRender()),$e(()=>this.activeLayerInfos,"change",()=>this._refreshActiveLayerInfos(this.activeLayerInfos)),we(()=>this.headingLevel,e=>{const{style:t}=this;t&&(t.headingLevel=e)}),we(()=>this.style,(e,t)=>{t&&e!==t&&t.destroy(),e&&(e.activeLayerInfos=this.activeLayerInfos,e.type==="card"&&(e.view=this.view),e.headingLevel=this.headingLevel)},Pe)])}destroy(){this.style?.destroy()}get activeLayerInfos(){return this.viewModel.activeLayerInfos}set activeLayerInfos(e){this.viewModel.activeLayerInfos=e}get basemapLegendVisible(){return this.viewModel.basemapLegendVisible}set basemapLegendVisible(e){this.viewModel.basemapLegendVisible=e}get groundLegendVisible(){return this.viewModel.groundLegendVisible}set groundLegendVisible(e){this.viewModel.groundLegendVisible=e}get hideLayersNotInCurrentView(){return this.viewModel.hideLayersNotInCurrentView}set hideLayersNotInCurrentView(e){this.viewModel.hideLayersNotInCurrentView=e}get keepCacheOnDestroy(){return this.viewModel.keepCacheOnDestroy}set keepCacheOnDestroy(e){this.viewModel.keepCacheOnDestroy=e}get respectLayerDefinitionExpression(){return this.viewModel.respectLayerDefinitionExpression}set respectLayerDefinitionExpression(e){this.viewModel.respectLayerDefinitionExpression=e}get respectLayerVisibility(){return this.viewModel.respectLayerVisibility}set respectLayerVisibility(e){this.viewModel.respectLayerVisibility=e}get icon(){return"legend"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get layerInfos(){return this.viewModel.layerInfos}set layerInfos(e){this.viewModel.layerInfos=e}set style(e){const t=this._get("style");e!==t&&t?.destroy(),this._set("style",e)}castStyle(e){if(e instanceof P||e instanceof V)return e;if(typeof e=="string")return e==="card"?new P:new V;if(e&&typeof e.type=="string"){const t={...e};return delete t.type,e.type==="card"?new P(t):new V(t)}return new V}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){return s("div",{class:this.classes(Vt.base,Le.widget,this.style instanceof V?Le.panel:null)},this.style.render())}_refreshActiveLayerInfos(e){e.forEach(t=>{this.removeHandles(`version_${t.layer.uid}`),this._renderOnActiveLayerInfoChange(t)}),this.scheduleRender()}_renderOnActiveLayerInfoChange(e){const t=we(()=>e.version,()=>this.scheduleRender());this.addHandles(t,`version_${e.layer.uid}`);const i=$e(()=>e.children,"change",()=>e.children.forEach(r=>this._renderOnActiveLayerInfoChange(r)),Pe);this.addHandles(i,`version_${e.layer.uid}`),e.children.forEach(r=>this._renderOnActiveLayerInfoChange(r))}};n([c()],z.prototype,"activeLayerInfos",null),n([c()],z.prototype,"basemapLegendVisible",null),n([c()],z.prototype,"groundLegendVisible",null),n([c()],z.prototype,"headingLevel",void 0),n([c()],z.prototype,"hideLayersNotInCurrentView",null),n([c()],z.prototype,"keepCacheOnDestroy",null),n([c()],z.prototype,"respectLayerDefinitionExpression",null),n([c()],z.prototype,"respectLayerVisibility",null),n([c()],z.prototype,"icon",null),n([c()],z.prototype,"label",null),n([c()],z.prototype,"layerInfos",null),n([c(),ue("esri/widgets/Legend/t9n/Legend")],z.prototype,"messages",void 0),n([c()],z.prototype,"style",null),n([ft("style")],z.prototype,"castStyle",null),n([c()],z.prototype,"view",null),n([c()],z.prototype,"viewModel",void 0),z=n([S("esri.widgets.Legend")],z);const Xt=z;export{Xt as default};
