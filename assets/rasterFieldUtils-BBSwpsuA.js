import{fg as x}from"./index-Bkom2Sdc.js";const V="Raster.",s="Raster.Dim.",$=".Max",o={servicePixelValue:"Raster.ServicePixelValue",rawServicePixelValue:"Raster.ServicePixelValue.Raw",itemPixelValue:"Raster.ItemPixelValue",magnitude:"Raster.Magnitude",direction:"Raster.Direction",variable:"Raster.Variable"},w=new Map([["quarters","Quarter"],["months","Month"],["weeks","Week of the year"],["days","Day of the year"]]);function c(e,n){return new x({name:e,alias:n,domain:null,editable:!1,length:50,type:"string"})}function d(e,n){return new x({name:e,alias:n,domain:null,editable:!1,type:"double"})}function b(e,n){return new x({name:e,alias:n,domain:null,editable:!1,type:"date"})}function P(e){return c(o.servicePixelValue,e??"Service Pixel Value")}function S(e){return c(o.rawServicePixelValue,e??"Raw Service Pixel Value")}function R(){return c(o.itemPixelValue,"Item Pixel Value")}function M(e){return c(`${o.servicePixelValue}.${e}`,e)}function I(e){return d(`${o.magnitude}`,"Magnitude"+(e?` (${e})`:""))}function D(){return d(`${o.direction}`,"Direction (Â°)")}function E(e){return e.fields.filter(n=>n.type!=="oid"&&n.name.toLowerCase()!=="value").map(n=>{const a=n.clone();return a.name=`${V}${n.name}`,a})}function N(e){const n=new Set,a=new Set,t=new Map;return e.variables.forEach(({dimensions:i})=>{i.forEach(r=>{if(r.recurring)t.set(r.name,r.unit);else{const u=r.unit?.trim()==="ISO8601"||r.name?.trim()?.toLowerCase()==="stdtime"?n:a;u.add(r.name),r.hasRanges&&u.add(`${r.name}${$}`)}})}),[c(o.variable,"Variable"),...[...n].map(i=>b(`${s}${i}`,h(i))),...[...a].map(i=>d(`${s}${i}`,h(i))),...[...t].map(([i,r])=>d(`${s}${i}`,g(i,r)))]}function g(e,n){return n=n?.toLowerCase(),n&&w.has(n)?w.get(n):h(e)}function h(e){const n=e.endsWith($),a=n?e.slice(0,-4):e,t=a==="StdTime"?"Standard Time":a==="StdZ"?"Standard Z":a;return n?`${t} Max`:t}function p(e,n){return n?new Date(e):e}function W(e,n,a){a?.length&&(n[o.variable]=a[0].variableName,a.forEach(({dimensionName:t,values:i})=>{if(t&&i?.length){const r=`${s}${t}`,u=e.find(({name:f})=>f===r);if(!u)return;const m=u.type==="date",l=i[0];if(Array.isArray(l)){if(n[`${s}${t}`]=p(l[0],m),l[1]!=null){const f=`${s}${t}${$}`;if(e.some(({name:v})=>v===f)){const v=p(l[1],m);n[f]=v}}}else n[`${s}${t}`]=p(l,m)}}))}function C(e,n){if(n.pixelType.startsWith("f")&&e.forEach(({format:a,fieldName:t})=>{a&&t&&/^raster\.(item|service)pixelvalue/i.test(t)&&(a.places=2)}),n.multidimensionalInfo){const a=n.multidimensionalInfo.variables.flatMap(({dimensions:t})=>t);e.forEach(({format:t,fieldName:i})=>{if(t&&i?.startsWith(s)){const r=i.slice(s.length),u=`${r}${$}`;a.find(({name:l})=>l===r||l===u)?.values?.every(l=>Number.isInteger(l))&&(t.places=0)}})}}export{D as $,W as V,V as a,C as b,S as c,I as d,M as f,o as i,R as m,s as n,P as o,N as p,E as v};
