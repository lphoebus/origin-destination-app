import{aE as K,aF as _,aw as x,az as f,a as q,aG as I,ah as b,ai as Z,at as G}from"./index-Bkom2Sdc.js";import{d as g,g as A}from"./math-DycuvT_e.js";import{c as R}from"./text-rFUG5AAV.js";/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const H=5;function P({locale:r,numberingSystem:e,includeSeconds:t=!0,fractionalSecondDigits:i,hour12:n}){const o={hour:"2-digit",minute:"2-digit",timeZone:"UTC",numberingSystem:G(e)};return typeof n=="boolean"&&(o.hour12=n),t&&(o.second="2-digit",i&&(o.fractionalSecondDigits=i)),Z(r,o)}function $(r,e){return parseFloat(`0.${r}`).toFixed(g(e)).replace("0.","")}function S(r,e){if(r==null)return;const t=r.toString(),i=g(r);if(r<1&&i>0&&i<4){const n=t.replace("0.","");return!e||n.length===e?n:n.length<e?n.padEnd(e,"0"):n}if(r>=0&&r<10)return t.padStart(2,"0");if(r>=10)return t}function j(r){return parseInt((parseFloat(`0.${r}`)/.001).toFixed(3))}function J(r){const e={locale:r};return r==="mk"?e.hour12=!1:r.toLowerCase()==="es-mx"&&(e.hour12=!0),P(e).formatToParts(new Date(Date.UTC(0,0,0,0,0,0))).find(({type:n})=>n==="dayPeriod")?.value?"12":"24"}function N({locale:r,meridiem:e,parts:t}){const i=["he","bs","mk"];let n;if(t){if(n=t.find(({type:o})=>o==="dayPeriod")?.value||null,r&&i.includes(r)){const o=I.get(r);n==="PM"&&(n=o.pm),n==="AM"&&(n=o.am)}}else if(e)if(i.includes(r)){const o=I.get(r);n=e==="PM"?o.pm:o.am}else{const o=P({locale:r,hour12:!0}),s=6,a=18,l=new Date(Date.UTC(0,0,0,e==="AM"?s:a,0));n=o.formatToParts(l).find(({type:d})=>d==="dayPeriod")?.value||null}return n}function T(r,e){return b.numberFormatOptions={locale:r,numberingSystem:e},b.localize("1.1").split("")[1]}function V(r,e,t="latn"){const n=P({locale:e,numberingSystem:t}).formatToParts(new Date(Date.UTC(0,0,0,0,0,0)));return h(`${r}Suffix`,n)}function h(r,e,t="en"){if(!r||!e)return null;if(r==="hourSuffix"){const i=e.indexOf(e.find(({type:s})=>s==="hour")),n=e.indexOf(e.find(({type:s})=>s==="minute")),o=e[i+1];return o&&o.type==="literal"&&n-i===2&&o.value?.trim()||null}if(r==="minuteSuffix"){const i=e.indexOf(e.find(({type:s})=>s==="minute")),n=e.indexOf(e.find(({type:s})=>s==="second")),o=e[i+1];return o&&o.type==="literal"&&n-i===2&&o.value?.trim()||null}if(r==="secondSuffix"){let i;const n=e.indexOf(e.find(({type:o})=>o==="fractionalSecond"));if(n)i=e[n+1];else{const o=e.indexOf(e.find(({type:s})=>s==="second"));i=e[o+1]}return i?.type==="literal"&&i.value?.trim()||null}return r==="meridiem"&&(e.find(({type:n})=>n==="dayPeriod")?.value||null)?N({locale:t,parts:e}):e.find(({type:i})=>i===r)?.value||null}function y(r){if(!f(r))return null;const e=parseInt(r);return e>=0&&e<=11?"AM":"PM"}function Q(r){return new Intl.DateTimeFormat(r,{hour:"2-digit",hour12:!0,minute:"2-digit",timeZone:"UTC"}).formatToParts(new Date(Date.UTC(0,0,0,0,0))).findIndex(i=>i.type==="dayPeriod")}function F(r){const e=typeof r=="string";if(!r||e&&(r.startsWith(":")||r.endsWith(":"))||!e&&(!r.hour||!r.minute))return!1;let t,i,n;if(e?[t,i,n]=r.split(":"):{hour:t,minute:i,second:n}=r,!t||!i)return!1;const o=parseInt(t),s=parseInt(i),a=parseInt(n),l=f(t)&&o>=0&&o<24,u=f(i)&&s>=0&&s<60,d=f(n)&&a>=0&&a<60;return!!(l&&u&&!n||l&&u&&d)}function X(r,e){if(e==="meridiem")return r==="AM"||r==="PM";if(!f(r))return!1;const t=Number(r),i=t>=0,n=t<24,o=t<60,s=t<=999;return e==="hour"?i&&n:e==="fractionalSecond"?i&&s:i&&o}function z({value:r,part:e,locale:t,numberingSystem:i="latn",hour12:n}){if(!X(r,e))return;if(e==="fractionalSecond"){const u=T(t,i);let d=null;if(r){b.numberFormatOptions={locale:t,numberingSystem:i};const m=b.localize("0");parseInt(r)===0?d="".padStart(r.length,m):(d=b.localize(`0.${r}`).replace(`${m}${u}`,""),d.length<r.length&&(d=d.padEnd(r.length,m)))}return d}const o=parseInt(r),s=new Date(Date.UTC(0,0,0,e==="hour"?o:e==="meridiem"?r==="AM"?0:12:0,e==="minute"?o:0,e==="second"?o:0));if(!s)return;const l=P({hour12:n,locale:t,numberingSystem:i}).formatToParts(s);return h(e,l,t)}function Y({hour12:r,includeSeconds:e=!0,locale:t,numberingSystem:i="latn",parts:n=!1,step:o,value:s}){if(!F(s))return null;const{hour:a,minute:l,second:u="0",fractionalSecond:d}=U(s,o),m=new Date(Date.UTC(0,0,0,parseInt(a),parseInt(l),parseInt(u),d&&j(d))),w=P({fractionalSecondDigits:g(o),hour12:r,includeSeconds:e,locale:t,numberingSystem:i});if(n){const c=w.formatToParts(m);return{hour:h("hour",c),hourSuffix:h("hourSuffix",c),minute:h("minute",c),minuteSuffix:h("minuteSuffix",c),second:h("second",c),decimalSeparator:T(t,i),fractionalSecond:h("fractionalSecond",c),secondSuffix:t!=="bg"&&h("secondSuffix",c),meridiem:h("meridiem",c,t)}}else{let c=w.format(m)||null;if(!n&&typeof c=="string"&&t==="bg"&&c&&c.includes(" ч.")&&(c=c.replaceAll(" ч.","")),["he","bs","mk"].includes(t)){const M=I.get(t);c.includes("AM")?c=c.replaceAll("AM",M.am):c.includes("PM")&&(c=c.replaceAll("PM",M.pm)),t!=="he"&&c.indexOf(".")!==c.length-1&&(c=c.replace(".",","))}return c}}function U(r,e){if(F(r)){const[t,i,n]=r.split(":");let o=n,s=null;return n?.includes(".")&&([o,s]=n.split(".")),e&&(s=$(s,e)),{fractionalSecond:s,hour:t,minute:i,second:o}}return{fractionalSecond:null,hour:null,minute:null,second:null}}function O(r,e=60){if(!F(r))return null;let t,i,n,o,s,a=null;return typeof r=="string"?([t,i,o]=r.split(":"),[n,s]=o?.split(".")||["0"]):(t=r.hour,i=r.minute,n=r.second,s=r.fractionalSecond),t&&i&&(a=`${S(parseInt(t))}:${S(parseInt(i))}`,e<60&&(a+=`:${S(parseInt(n||"0"))}`,e<1&&(a+=`.${$(s||"0",e)}`))),a}class v extends _{constructor(){super(...arguments),this.localizedDecimalSeparator=".",this.userChangedValue=!1,this.handleHourKeyDownEvent=e=>{const t=e.key;if(x.includes(t)){const i=parseInt(t);let n;if(f(this.hour))switch(this.hourFormat){case"12":n=this.hour==="01"&&i>=0&&i<=2?`1${i}`:i;break;case"24":this.hour==="01"?n=`1${i}`:this.hour==="02"&&i>=0&&i<=3?n=`2${i}`:n=i;break}else n=i;this.setValuePart("hour",n)}else switch(t){case"Backspace":case"Delete":e.preventDefault(),this.setValuePart("hour",null);break;case"ArrowDown":e.preventDefault(),this.decrementHour();break;case"ArrowUp":e.preventDefault(),this.incrementHour();break;case" ":case"Spacebar":e.preventDefault();break}},this.handleMinuteKeyDownEvent=e=>{const t=e.key;if(x.includes(t)){const i=parseInt(t);let n;if(f(this.minute)&&this.minute.startsWith("0")){const o=parseInt(this.minute);n=o>H?i:`${o}${i}`}else n=i;this.setValuePart("minute",n)}else switch(t){case"Backspace":case"Delete":e.preventDefault(),this.setValuePart("minute",null);break;case"ArrowDown":e.preventDefault(),this.decrementMinute();break;case"ArrowUp":e.preventDefault(),this.incrementMinute();break;case" ":case"Spacebar":e.preventDefault();break}},this.handleSecondKeyDownEvent=e=>{const t=e.key;if(x.includes(t)){const i=parseInt(t);let n;if(f(this.second)&&this.second.startsWith("0")){const o=parseInt(this.second);n=o>H?i:`${o}${i}`}else n=i;this.setValuePart("second",n)}else switch(t){case"Backspace":case"Delete":e.preventDefault(),this.setValuePart("second",null);break;case"ArrowDown":e.preventDefault(),this.decrementSecond();break;case"ArrowUp":e.preventDefault(),this.incrementSecond();break;case" ":case"Spacebar":e.preventDefault();break}},this.handleFractionalSecondKeyDownEvent=e=>{const{key:t}=e;if(x.includes(t)){const i=g(this.component.step),n=parseInt(this.fractionalSecond),o=n.toString().length;let s;o>=i?s=t.padStart(i,"0"):o<i&&(s=`${n}${t}`.padStart(i,"0")),this.setValuePart("fractionalSecond",parseFloat(`0.${s}`))}else switch(t){case"Backspace":case"Delete":e.preventDefault(),this.setValuePart("fractionalSecond",null);break;case"ArrowDown":e.preventDefault(),this.nudgeFractionalSecond("down");break;case"ArrowUp":e.preventDefault(),this.nudgeFractionalSecond("up");break;case" ":e.preventDefault();break}},this.handleMeridiemKeyDownEvent=e=>{switch(e.key){case"a":this.setValuePart("meridiem","AM");break;case"p":this.setValuePart("meridiem","PM");break;case"Backspace":case"Delete":e.preventDefault(),this.setValuePart("meridiem");break;case"ArrowUp":e.preventDefault(),this.toggleMeridiem("up");break;case"ArrowDown":e.preventDefault(),this.toggleMeridiem("down");break;case" ":case"Spacebar":e.preventDefault();break}},this.calciteTimeChange=q()}decrementHour(){const e=this.hour?this.hour==="00"?23:parseInt(this.hour)-1:0;this.setValuePart("hour",e)}decrementMinute(){this.decrementMinuteOrSecond("minute")}decrementSecond(){this.decrementMinuteOrSecond("second")}incrementHour(){const e=f(this.hour)?this.hour==="23"?0:parseInt(this.hour)+1:1;this.setValuePart("hour",e)}incrementMinute(){this.incrementMinuteOrSecond("minute")}incrementSecond(){this.incrementMinuteOrSecond("second")}nudgeFractionalSecond(e){const t=A(this.component.step),i=g(this.component.step),n=parseInt(this.fractionalSecond),o=parseFloat(`0.${this.fractionalSecond}`);let s,a,l,u;e==="up"&&(s=isNaN(n)?0:o+t,a=parseFloat(s.toFixed(i)),l=A(a),u=a<1&&g(l)>0?S(l,i):"".padStart(i,"0")),e==="down"&&(s=isNaN(n)||n===0?1-t:o-t,a=parseFloat(s.toFixed(i)),l=A(a),u=a<1&&g(l)>0&&Math.sign(l)===1?S(l,i):"".padStart(i,"0")),this.setValuePart("fractionalSecond",u)}toggleMeridiem(e){let t;this.meridiem?t=this.meridiem==="AM"?"PM":"AM":t=e==="down"?"PM":"AM",this.setValuePart("meridiem",t)}hostConnected(){this.setHourFormat(),this.setMeridiemOrder(),this.setValue(this.component.value)}hostUpdate(e){let t=!1,i=!1,n=!1;if(e.has("hourFormat")&&(t=!0,n=!0),e.has("messages")&&e.get("messages")?._lang!==this.component.messages._lang&&(t=!0,i=!0,n=!0),e.has("numberingSystem")&&(n=!0),e.has("step")){const o=this.component.step,s=e.get("step");(o>=60&&s>0&&s<60||s>=60&&o>0&&o<60)&&(n=!0)}t&&this.setHourFormat(),i&&this.setMeridiemOrder(),n&&this.setValue(this.component.value)}decrementMinuteOrSecond(e){let t;if(f(this[e])){const i=parseInt(this[e]);t=i===0?59:i-1}else t=59;this.setValuePart(e,t)}incrementMinuteOrSecond(e){const t=f(this[e])?this[e]==="59"?0:parseInt(this[e])+1:0;this.setValuePart(e,t)}setHourFormat(){const{hourFormat:e,messages:t}=this.component,i=t._lang;this.hourFormat=e==="user"?J(i):e}setMeridiemOrder(){const{messages:e}=this.component,t=e._lang;this.meridiemOrder=Q(t)}setValue(e,t=!1){const{messages:i,numberingSystem:n,step:o,value:s}=this.component,a=i._lang,l=this.hourFormat==="12",u=O(e,o);if(F(e)){const{hour:d,minute:m,second:w,fractionalSecond:c}=U(u,o),{hour:M,hourSuffix:D,minute:p,minuteSuffix:C,second:B,secondSuffix:E,decimalSeparator:L,fractionalSecond:W,meridiem:k}=Y({hour12:l,locale:a,numberingSystem:n,parts:!0,step:o,value:u});this.hour=d,this.minute=m,this.second=w,this.fractionalSecond=c,this.localizedHour=M,this.localizedHourSuffix=D,this.localizedMinute=p,this.localizedMinuteSuffix=C,this.localizedSecond=B,this.localizedDecimalSeparator=L,this.localizedFractionalSecond=W,this.localizedSecondSuffix=E,k&&(this.meridiem=y(this.hour),this.localizedMeridiem=k)}else this.hour=null,this.minute=null,this.second=null,this.fractionalSecond=null,this.meridiem=null,this.localizedHour=null,this.localizedHourSuffix=V("hour",a,n),this.localizedMinute=null,this.localizedMinuteSuffix=V("minute",a,n),this.localizedSecond=null,this.localizedDecimalSeparator=T(a,n),this.localizedFractionalSecond=null,this.localizedSecondSuffix=V("second",a,n),this.localizedMeridiem=null;u!==s?(this.userChangedValue=t,this.component.value=u??""):this.component.requestUpdate()}setValuePart(e,t){const{hourFormat:i}=this,{messages:n,numberingSystem:o,step:s}=this.component,a=n._lang,l=i==="12",u=this.component.value;if(e==="meridiem"){const D=this.meridiem;if(this.meridiem=t,this.localizedMeridiem=z({hour12:l,locale:a,numberingSystem:o,part:"meridiem",value:this.meridiem}),f(this.hour)){const p=parseInt(this.hour);switch(t){case"AM":p>=12&&(this.hour=S(p-12));break;case"PM":p<12&&(this.hour=S(p+12));break;default:this.component.value="";break}this.localizedHour=z({hour12:l,locale:a,numberingSystem:o,part:"hour",value:this.hour})}D!==this.meridiem&&this.component.requestUpdate()}else if(e==="fractionalSecond"){const D=this.fractionalSecond,p=g(s);typeof t=="number"?this.fractionalSecond=t===0?"".padStart(p,"0"):S(t,p):this.fractionalSecond=t,this.localizedFractionalSecond=z({value:this.fractionalSecond,part:"fractionalSecond",locale:a,numberingSystem:o,hour12:l}),D!==this.fractionalSecond&&this.component.requestUpdate()}else{const D=this[e];this[e]=typeof t=="number"?S(t):t,this[`localized${R(e)}`]=z({value:this[e],part:e,locale:a,numberingSystem:o,hour12:l}),D!==this[e]&&this.component.requestUpdate()}const{hour:d,minute:m,second:w,fractionalSecond:c}=this,M=O({hour:d,minute:m,second:w,fractionalSecond:c},s);u!==M&&(e==="hour"&&i==="12"&&(this.meridiem=y(d),this.localizedMeridiem=N({locale:a,meridiem:this.meridiem})),this.userChangedValue=!0,this.calciteTimeChange.emit(M??""))}}const ne=K(v);export{ne as u};
