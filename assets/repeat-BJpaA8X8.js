import{_ as A,$ as M,a3 as b,a4 as j,a5 as p,a6 as v,a7 as m,a8 as C,a0 as D}from"./index-C2z3vZ9k.js";/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const w=(r,f,c)=>{const h=new Map;for(let e=f;e<=c;e++)h.set(r[e],e);return h},H=A(class extends M{constructor(r){if(super(r),r.type!==b.CHILD)throw Error("repeat() can only be used in text expressions")}dt(r,f,c){let h;c===void 0?c=f:f!==void 0&&(h=f);const e=[],a=[];let l=0;for(const i of r)e[l]=h?h(i,l):l,a[l]=c(i,l),l++;return{values:a,keys:e}}render(r,f,c){return this.dt(r,f,c).values}update(r,[f,c,h]){const e=j(r),{values:a,keys:l}=this.dt(f,c,h);if(!Array.isArray(e))return this.ut=l,a;const i=this.ut??(this.ut=[]),u=[];let y,g,s=0,n=e.length-1,t=0,o=a.length-1;for(;s<=n&&t<=o;)if(e[s]===null)s++;else if(e[n]===null)n--;else if(i[s]===l[t])u[t]=p(e[s],a[t]),s++,t++;else if(i[n]===l[o])u[o]=p(e[n],a[o]),n--,o--;else if(i[s]===l[o])u[o]=p(e[s],a[o]),v(r,u[o+1],e[s]),s++,o--;else if(i[n]===l[t])u[t]=p(e[n],a[t]),v(r,e[s],e[n]),n--,t++;else if(y===void 0&&(y=w(l,t,o),g=w(i,s,n)),y.has(i[s]))if(y.has(i[n])){const d=g.get(l[t]),x=d!==void 0?e[d]:null;if(x===null){const k=v(r,e[s]);p(k,a[t]),u[t]=k}else u[t]=p(x,a[t]),v(r,e[s],x),e[d]=null;t++}else m(e[n]),n--;else m(e[s]),s++;for(;t<=o;){const d=v(r,u[o+1]);p(d,a[t]),u[t++]=d}for(;s<=n;){const d=e[s++];d!==null&&m(d)}return this.ut=l,D(r,u),C}});export{H as c};
